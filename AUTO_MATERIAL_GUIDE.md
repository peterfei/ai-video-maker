# è‡ªåŠ¨ç´ æè·å–åŠŸèƒ½ - å®Œæ•´æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

è‡ªåŠ¨ç´ æè·å–åŠŸèƒ½å¯ä»¥æ™ºèƒ½åœ°ä¸ºä½ çš„è§†é¢‘è„šæœ¬è‡ªåŠ¨å¯»æ‰¾å’ŒåŒ¹é…åˆé€‚çš„å›¾ç‰‡ç´ æï¼Œæ— éœ€æ‰‹åŠ¨å‡†å¤‡å¤§é‡ç´ ææ–‡ä»¶ã€‚

### æ ¸å¿ƒç‰¹æ€§

âœ¨ **æ™ºèƒ½åŒ¹é…** - ä½¿ç”¨AIè¯­ä¹‰ç†è§£ï¼Œè‡ªåŠ¨æå–å…³é”®è¯å¹¶åŒ¹é…ç›¸å…³ç´ æ
ğŸŒ **å¤šæºè·å–** - æ”¯æŒä»Unsplashã€Pexelsç­‰å…è´¹å›¾åº“è‡ªåŠ¨ä¸‹è½½
ğŸ“š **ç´ æåº“ç®¡ç†** - è‡ªåŠ¨æ„å»ºå’Œç®¡ç†æœ¬åœ°ç´ æåº“ï¼ŒæŒç»­ç§¯ç´¯
ğŸ”„ **æ··åˆç­–ç•¥** - ä¼˜å…ˆæœ¬åœ°ï¼Œä¸è¶³æ—¶è‡ªåŠ¨åœ¨çº¿è·å–
ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - é¿å…é‡å¤ä¸‹è½½ï¼ŒèŠ‚çœæ—¶é—´å’Œå¸¦å®½

## ğŸ“‹ å·¥ä½œæµç¨‹

```
1. åˆ†æè„šæœ¬å†…å®¹
   â†“
2. æå–å…³é”®è¯ï¼ˆAIæˆ–è§„åˆ™ï¼‰
   â†“
3. æœç´¢æœ¬åœ°ç´ æåº“
   â†“
4. æœ¬åœ°ä¸è¶³ï¼Ÿâ†’ ä»å…è´¹å›¾åº“ä¸‹è½½
   â†“
5. æ·»åŠ åˆ°ç´ æåº“ï¼ˆæŒç»­ç§¯ç´¯ï¼‰
   â†“
6. è¿”å›ç´ æç”¨äºè§†é¢‘ç”Ÿæˆ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: å¯ç”¨è‡ªåŠ¨ç´ æåŠŸèƒ½

ç¼–è¾‘ `config/default_config.yaml`:

```yaml
auto_materials:
  enabled: true               # å¯ç”¨åŠŸèƒ½
  local_priority: true        # ä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç´ æ
  auto_download: true         # è‡ªåŠ¨ä¸‹è½½
  build_library: true         # æ„å»ºç´ æåº“
```

### æ­¥éª¤ 2: é…ç½®APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰

å¦‚æœè¦ä½¿ç”¨å…è´¹å›¾åº“APIï¼Œéœ€è¦è·å–APIå¯†é’¥ï¼š

#### Unsplash API

1. è®¿é—® https://unsplash.com/developers
2. æ³¨å†Œå¹¶åˆ›å»ºåº”ç”¨
3. è·å– Access Key

#### Pexels API

1. è®¿é—® https://www.pexels.com/api/
2. æ³¨å†Œå¹¶è·å– API Key

#### é…ç½®æ–¹å¼

æ–¹å¼ 1: è®¾ç½®ç¯å¢ƒå˜é‡

```bash
export UNSPLASH_ACCESS_KEY="your_unsplash_key"
export PEXELS_API_KEY="your_pexels_key"
```

æ–¹å¼ 2: ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¡«å†™

```yaml
auto_materials:
  unsplash_key: "your_unsplash_key"
  pexels_key: "your_pexels_key"
```

### æ­¥éª¤ 3: ç”Ÿæˆè§†é¢‘

```bash
python3 generate.py --script examples/sample_script.txt
```

ç³»ç»Ÿå°†è‡ªåŠ¨ï¼š
- åˆ†æè„šæœ¬å†…å®¹
- æå–å…³é”®è¯
- æŸ¥æ‰¾/ä¸‹è½½ç´ æ
- ç”Ÿæˆè§†é¢‘

## ğŸ¨ é…ç½®è¯¦è§£

### å®Œæ•´é…ç½®é€‰é¡¹

```yaml
auto_materials:
  # åŸºç¡€è®¾ç½®
  enabled: false              # æ˜¯å¦å¯ç”¨ï¼ˆæ”¹ä¸ºtrueå¯ç”¨ï¼‰
  local_priority: true        # ä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç´ æ
  auto_download: true         # è‡ªåŠ¨ä»åœ¨çº¿å›¾åº“ä¸‹è½½
  build_library: true         # æ„å»ºç´ æåº“ï¼ˆä¿å­˜ä¸‹è½½çš„ç´ æï¼‰
  library_path: "data/material_library"  # ç´ æåº“è·¯å¾„

  # è¯­ä¹‰åŒ¹é…è®¾ç½®
  semantic:
    use_ai: false             # æ˜¯å¦ä½¿ç”¨AIæå–å…³é”®è¯ï¼ˆéœ€è¦OpenAI APIï¼‰
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-3.5-turbo"

  # å›¾åº“APIå¯†é’¥
  unsplash_key: "${UNSPLASH_ACCESS_KEY}"
  pexels_key: "${PEXELS_API_KEY}"

  # ç´ ææ•°é‡
  materials_per_segment: 1    # æ¯ä¸ªè„šæœ¬ç‰‡æ®µä½¿ç”¨çš„ç´ ææ•°é‡
```

### é…ç½®è¯´æ˜

#### `enabled`
- **ç±»å‹**: boolean
- **é»˜è®¤**: false
- **è¯´æ˜**: ä¸»å¼€å…³ï¼Œå¿…é¡»è®¾ä¸ºtrueæ‰èƒ½å¯ç”¨è‡ªåŠ¨ç´ æåŠŸèƒ½

#### `local_priority`
- **ç±»å‹**: boolean
- **é»˜è®¤**: true
- **è¯´æ˜**: ä¼˜å…ˆä»æœ¬åœ°ç´ æåº“æŸ¥æ‰¾ï¼Œå‡å°‘åœ¨çº¿ä¸‹è½½

#### `auto_download`
- **ç±»å‹**: boolean
- **é»˜è®¤**: true
- **è¯´æ˜**: å½“æœ¬åœ°ç´ æä¸è¶³æ—¶ï¼Œè‡ªåŠ¨ä»åœ¨çº¿å›¾åº“ä¸‹è½½

#### `build_library`
- **ç±»å‹**: boolean
- **é»˜è®¤**: true
- **è¯´æ˜**: å°†ä¸‹è½½çš„ç´ æä¿å­˜åˆ°æœ¬åœ°åº“ï¼ŒæŒç»­ç§¯ç´¯

#### `semantic.use_ai`
- **ç±»å‹**: boolean
- **é»˜è®¤**: false
- **è¯´æ˜**: ä½¿ç”¨AIï¼ˆGPTï¼‰æå–å…³é”®è¯ï¼Œæ›´å‡†ç¡®ä½†éœ€è¦API
- **ä¸å¯ç”¨æ—¶**: ä½¿ç”¨é¢„å®šä¹‰çš„å…³é”®è¯æ˜ å°„è¡¨ï¼ˆå…è´¹ï¼‰

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºç¡€ä½¿ç”¨ï¼ˆæ— APIå¯†é’¥ï¼‰

å³ä½¿æ²¡æœ‰é…ç½®ä»»ä½•APIå¯†é’¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŸºç¡€åŠŸèƒ½ï¼š

```yaml
auto_materials:
  enabled: true
  local_priority: true
  auto_download: false  # ä¸ä¸‹è½½ï¼Œåªä½¿ç”¨æœ¬åœ°
  build_library: true
```

ç³»ç»Ÿå°†ï¼š
- ä½¿ç”¨è§„åˆ™æå–å…³é”®è¯
- ä»æœ¬åœ°ç´ æåº“åŒ¹é…
- å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œä½¿ç”¨å¤‡ç”¨ç´ æ

### ç¤ºä¾‹ 2: ä½¿ç”¨å…è´¹å›¾åº“ï¼ˆæ¨èï¼‰

é…ç½®Unsplashæˆ–Pexelsçš„APIå¯†é’¥ï¼š

```yaml
auto_materials:
  enabled: true
  auto_download: true
  unsplash_key: "your_key_here"
```

ç³»ç»Ÿå°†ï¼š
- è‡ªåŠ¨ä»Unsplashä¸‹è½½é«˜è´¨é‡å›¾ç‰‡
- ä¿å­˜åˆ°æœ¬åœ°ç´ æåº“
- ä¸‹æ¬¡ä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç¼“å­˜

### ç¤ºä¾‹ 3: AIå¢å¼ºæ¨¡å¼

é…ç½®OpenAI APIè·å¾—æœ€ä½³æ•ˆæœï¼š

```yaml
auto_materials:
  enabled: true
  semantic:
    use_ai: true
    api_key: "sk-..."
```

ç³»ç»Ÿå°†ï¼š
- ä½¿ç”¨GPTç†è§£è„šæœ¬å†…å®¹
- æå–æœ€å‡†ç¡®çš„å…³é”®è¯
- åŒ¹é…æœ€ç›¸å…³çš„ç´ æ

## ğŸ¬ å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: æŠ€æœ¯æ•™ç¨‹è§†é¢‘

**è„šæœ¬å†…å®¹**:
```text
æ¬¢è¿æ¥åˆ°Pythonç¼–ç¨‹å…¥é—¨æ•™ç¨‹ï¼
ä»Šå¤©æˆ‘ä»¬å°†å­¦ä¹ Pythonçš„åŸºç¡€è¯­æ³•ã€‚
é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£å˜é‡çš„æ¦‚å¿µã€‚
```

**è‡ªåŠ¨åŒ¹é…çš„ç´ æ**:
- programming (ç¼–ç¨‹ç›¸å…³å›¾ç‰‡)
- python (Pythonæ ‡å¿—/ä»£ç )
- code (ä»£ç ç¼–è¾‘å™¨æˆªå›¾)

### æ¡ˆä¾‹ 2: è‡ªç„¶é£å…‰è§†é¢‘

**è„šæœ¬å†…å®¹**:
```text
#scene:nature# å¤§è‡ªç„¶çš„ç¾ä¸½ä»¤äººæƒŠå¹ã€‚
é«˜å±±ã€æ£®æ—ã€æµ·æ´‹ï¼Œæ¯ä¸€å¤„éƒ½æ˜¯ç‹¬ç‰¹çš„é£æ™¯ã€‚
æ—¥è½æ—¶åˆ†ï¼Œå¤©ç©ºè¢«æŸ“æˆé‡‘è‰²ã€‚
```

**è‡ªåŠ¨åŒ¹é…çš„ç´ æ**:
- mountain (é«˜å±±é£æ™¯)
- forest (æ£®æ—æ ‘æœ¨)
- sunset (æ—¥è½å¤©ç©º)

## ğŸ“š ç´ æåº“ç®¡ç†

### æŸ¥çœ‹ç´ æåº“ç»Ÿè®¡

åˆ›å»ºä¸€ä¸ªPythonè„šæœ¬ï¼š

```python
from src.content_sources import AutoMaterialManager

config = {
    'library_path': 'data/material_library'
}

manager = AutoMaterialManager(config)
manager.print_library_stats()
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
============================================================
ğŸ“š ç´ æåº“ç»Ÿè®¡
============================================================
æ€»å›¾ç‰‡æ•°: 42
ç´¢å¼•å…³é”®è¯æ•°: 38
åˆ†ç±»æ•°: 12
åˆ†ç±»åç§°: programming, nature, mountain, ...
è·¯å¾„: data/material_library
============================================================
```

### é‡å»ºç´¢å¼•

å¦‚æœæ‰‹åŠ¨æ·»åŠ äº†ç´ æåˆ°libraryç›®å½•ï¼š

```python
manager = AutoMaterialManager(config)
manager.rebuild_library_index()
```

### ç´ æåº“ç»“æ„

```
data/material_library/
â”œâ”€â”€ programming/
â”‚   â”œâ”€â”€ programming_abc123.jpg
â”‚   â””â”€â”€ code_def456.jpg
â”œâ”€â”€ nature/
â”‚   â”œâ”€â”€ mountain_xyz789.jpg
â”‚   â””â”€â”€ forest_uvw012.jpg
â”œâ”€â”€ business/
â”‚   â””â”€â”€ office_pqr345.jpg
â””â”€â”€ index.json  # è‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶
```

## ğŸ”§ é«˜çº§æŠ€å·§

### æŠ€å·§ 1: è‡ªå®šä¹‰å…³é”®è¯æ˜ å°„

ç¼–è¾‘ `src/content_sources/semantic_matcher.py`ï¼Œæ·»åŠ ä½ çš„å…³é”®è¯æ˜ å°„ï¼š

```python
self.keyword_mappings = {
    'ä½ çš„ä¸­æ–‡è¯': ['english', 'keyword', 'list'],
    # ...
}
```

### æŠ€å·§ 2: åœºæ™¯æ ‡è®°ä¼˜åŒ–

åœ¨è„šæœ¬ä¸­ä½¿ç”¨åœºæ™¯æ ‡è®°æ¥æ”¹å–„ç´ æåŒ¹é…ï¼š

```text
#scene:tech# è¿™æ®µè®²æŠ€æœ¯å†…å®¹
#scene:nature# è¿™æ®µè®²è‡ªç„¶é£å…‰
#scene:business# è¿™æ®µè®²å•†ä¸šå†…å®¹
```

### æŠ€å·§ 3: é¢„å…ˆæ„å»ºç´ æåº“

ä¸ºå¸¸ç”¨ä¸»é¢˜é¢„å…ˆä¸‹è½½ç´ æï¼š

```python
from src.content_sources.image_api import MultiSourceImageAPI

api = MultiSourceImageAPI(
    unsplash_key="your_key",
    pexels_key="your_key"
)

# ä¸ºå¸¸ç”¨å…³é”®è¯é¢„å…ˆä¸‹è½½
keywords = ['programming', 'nature', 'business', 'technology']
for keyword in keywords:
    results = api.search(keyword, count=10)
    api.download_images(results, keyword)
```

### æŠ€å·§ 4: æ‰¹é‡å¤„ç†ä¼˜åŒ–

æ‰¹é‡ç”Ÿæˆè§†é¢‘æ—¶ï¼Œç´ æåº“ä¼šè‡ªåŠ¨ç§¯ç´¯ï¼Œåç»­è§†é¢‘ç”Ÿæˆä¼šè¶Šæ¥è¶Šå¿«ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

### APIé…é¢é™åˆ¶

- **Unsplash**: 50 requests/hour (å…è´¹ç‰ˆ)
- **Pexels**: 200 requests/hour (å…è´¹ç‰ˆ)

å»ºè®®å¯ç”¨`build_library`æ¥å‡å°‘APIè°ƒç”¨ã€‚

### ç‰ˆæƒè¯´æ˜

- Unsplashå’ŒPexelsçš„å›¾ç‰‡éƒ½æ˜¯å…è´¹ä½¿ç”¨çš„
- æ— éœ€æ ‡æ³¨æ¥æºï¼ˆä½†å»ºè®®æ ‡æ³¨ï¼‰
- å¯ç”¨äºå•†ä¸šç”¨é€”

### æ€§èƒ½è€ƒè™‘

- é¦–æ¬¡ä¸‹è½½éœ€è¦æ—¶é—´
- æœ¬åœ°ç¼“å­˜åé€Ÿåº¦æ˜¾è‘—æå‡
- å»ºè®®åœ¨è‰¯å¥½çš„ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ— æ³•ä¸‹è½½ç´ æ

**åŸå› **: APIå¯†é’¥æœªé…ç½®æˆ–ç½‘ç»œé—®é¢˜

**è§£å†³**:
```bash
# æ£€æŸ¥APIå¯†é’¥
echo $UNSPLASH_ACCESS_KEY
echo $PEXELS_API_KEY

# æµ‹è¯•ç½‘ç»œ
curl https://api.unsplash.com
```

### é—®é¢˜ 2: ç´ æä¸ç›¸å…³

**åŸå› **: å…³é”®è¯æå–ä¸å‡†ç¡®

**è§£å†³**:
- å¯ç”¨AIæ¨¡å¼ (`use_ai: true`)
- ä½¿ç”¨åœºæ™¯æ ‡è®°ä¼˜åŒ–è„šæœ¬
- æ‰‹åŠ¨ç¼–è¾‘å…³é”®è¯æ˜ å°„

### é—®é¢˜ 3: ç´ æåº“è¶Šæ¥è¶Šå¤§

**è§£å†³**:
```bash
# æ¸…ç†æ—§ç´ æ
find data/material_library -type f -mtime +30 -delete

# é‡å»ºç´¢å¼•
python -c "from src.content_sources import AutoMaterialManager; m = AutoMaterialManager({'library_path': 'data/material_library'}); m.rebuild_library_index()"
```

## ğŸ“ˆ æœ€ä½³å®è·µ

1. **é€æ­¥å¯ç”¨**: å…ˆç”¨æœ¬åœ°æ¨¡å¼æµ‹è¯•ï¼Œå†å¼€å¯åœ¨çº¿ä¸‹è½½
2. **åˆç†é…é¢**: æ³¨æ„APIè°ƒç”¨é™åˆ¶ï¼Œé¿å…è¶…é¢
3. **å®šæœŸç»´æŠ¤**: å®šæœŸæ¸…ç†å’Œæ•´ç†ç´ æåº“
4. **åœºæ™¯æ ‡è®°**: åœ¨è„šæœ¬ä¸­ä½¿ç”¨åœºæ™¯æ ‡è®°æé«˜åŒ¹é…å‡†ç¡®åº¦
5. **æŒç»­ç§¯ç´¯**: è®©ç´ æåº“éšç€ä½¿ç”¨ä¸æ–­ä¸°å¯Œ

## ğŸ¯ æ€»ç»“

è‡ªåŠ¨ç´ æåŠŸèƒ½è®©è§†é¢‘ç”Ÿæˆæ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆï¼š

âœ… **é›¶å‡†å¤‡** - æ— éœ€æ‰‹åŠ¨æ”¶é›†ç´ æ
âœ… **æ™ºèƒ½åŒ¹é…** - è‡ªåŠ¨ç†è§£å†…å®¹å¹¶åŒ¹é…
âœ… **æŒç»­ä¼˜åŒ–** - ç´ æåº“è‡ªåŠ¨ç§¯ç´¯
âœ… **é«˜è´¨é‡** - æ¥è‡ªä¸“ä¸šå›¾åº“çš„é«˜è´¨é‡å›¾ç‰‡

å¼€å§‹ä½¿ç”¨å§ï¼è®©AIå¸®ä½ æ‰¾åˆ°perfectçš„ç´ æï¼ ğŸš€
