auto_materials:
  auto_download: true
  build_library: true
  enabled: true
  library_path: data/material_library
  local_priority: true
  materials_per_segment: 1
  pexels_key: ${PEXELS_API_KEY}
  semantic:
    api_key: ${OPENAI_API_KEY}
    model: gpt-3.5-turbo
    use_ai: false
  unsplash_key: ${UNSPLASH_ACCESS_KEY}
batch:
  log_level: INFO
  max_workers: 2
  retry_on_error: true
  retry_times: 3
  save_logs: true
performance:
  # 多线程设置
  threading:
    enabled: true
    max_workers: auto              # auto, 或指定数字
    max_concurrent_tasks: 4        # 最大并发任务数
    task_timeout: 3600            # 单个任务超时时间(秒)
    worker_memory_limit: 2048     # 每个工作线程内存限制(MB)
    retry_on_error: true
    retry_times: 3
    save_logs: true

  # GPU加速设置 - 临时禁用GPU，使用CPU处理
  gpu:
    enabled: false                 # ❌ 禁用GPU加速，强制使用CPU
    device: auto                  # auto, cuda:0, cpu
    backend_priority:             # GPU后端优先级（仅CPU）
      - cpu                       # 仅使用CPU处理
    memory_limit: 0.8             # GPU内存使用比例 (0.0-1.0)
    min_gpu_memory: 2147483648   # 最小GPU内存要求(2GB)
    max_batch_size: 16            # 最大批处理大小

    # GPU特效设置
    effects:
      enabled: true
      precision: fp16             # fp16, fp32
      cache_frames: true          # 是否缓存帧数据

  # 性能监控
  monitoring:
    enable_metrics: true
    log_performance: true
    profile_tasks: false
content_sources:
  ai:
    api_key: ${OPENAI_API_KEY}
    enabled: false
    model: gpt-4
    provider: openai
  materials:
    auto_resize: true
    image_formats:
    - .jpg
    - .jpeg
    - .png
    - .webp
    video_formats:
    - .mp4
    - .mov
    - .avi
  text:
    encoding: utf-8
    split_by_paragraph: false #按行分割脚本（适用于每行有时间标记的格式）
debug:
  enabled: false
  save_intermediate: false
  verbose_logging: false
export:
  filename_pattern: '{title}_{timestamp}'
  format: mp4
  overwrite: false
  quality: high
music:
  auto_select: true
  cache:
    enabled: true
    library_path: data/music_library.json
    max_age: 30
    max_files: 100
  # 基础音乐设置
  default_track: assets/music/piano.mp3
  enabled: true                       # 禁用智能音乐库
  basic_enabled: true                  # 启用基础背景音乐
  fade_in: 2.0
  fade_out: 3.0
  loop: true
  volume: 0.2

  # 智能音乐选择设置
  auto_music: true                     # 默认启用自动音乐选择
  copyright_only: true                 # 只使用无版权音乐
  # OpenAI配置
  openai:
    model: "gpt-4"                     # 使用的模型
    temperature: 0.7                   # 生成温度
    max_tokens: 1000                   # 最大token数
    api_key: ${OPENAI_API_KEY}         # API密钥

  # 音乐偏好
  preferences:
    genres: ["ambient", "electronic", "classical", "jazz"]  # 偏好类型
    moods: ["calm", "inspiring", "neutral"]  # 情绪偏好
    max_duration: 600                   # 最大音乐时长（秒）
    min_duration: 30                    # 最小时长（秒）

  # 下载配置
  download:
    dir: "assets/music"                 # 下载目录
    max_size: 52428800                  # 最大文件大小（50MB）
    timeout: 30                         # 下载超时（秒）
    chunk_size: 8192                    # 下载块大小
  # 音乐源配置
  sources:
    jamendo:
      enabled: true
      copyright_status: "creative_commons"
      client_id:  ${CLIENTID} # 申请地址：https://devportal.jamendo.com/
    pixabay:
      enabled: false
      copyright_status: "royalty_free"
      api_key_env: "PIXABAY_API_KEY"     # 申请地址：https://pixabay.com/api/docs/
    freesound:
      enabled: false
      copyright_status: "creative_commons"
      api_key_env: "FREESOUND_API_KEY"   # 申请地址：https://freesound.org/apiv2/apply/
    publicdomain:
      enabled: true
      copyright_status: "public_domain"
paths:
  assets: assets
  data: data
  fonts: assets/fonts
  music: assets/music
  output: output
  templates: assets/templates
stt:
  beam_size: 5
  compression_ratio_threshold: 2.4
  compute_type: auto
  cpu_threads: 4
  device: auto
  enabled: false
  language: zh
  length_penalty: 1.0
  logprob_threshold: -1.0
  model: base
  no_repeat_ngram_size: 0
  num_workers: 1
  patience: 1.0
  repetition_penalty: 1.0
  temperature:
  - 0.0
  - 0.2
  - 0.4
  - 0.6
  - 0.8
  - 1.0
  vad_filter: true
  vad_max_speech_duration_s: 30
  vad_min_speech_duration_ms: 250
  vad_threshold: 0.35
subtitle:
  align: center
  duration_per_char: 0.3
  enabled: true
  adaptive_font_size: false # 若要完全固定，改為 false
  uniform_font_size: true  # 關鍵：全片統一字級
  enable_density_limit: true
  max_text_height_ratio: 0.12
  max_text_width_ratio: 0.90
  font_color: white
  font_fallback:
  - 'assets/fonts/NotoSansCJKsc-Regular.otf  # Noto Sans CJK SC (项目预置)'
  - Noto Sans CJK SC
  - STHeiti Medium
  - Heiti SC
  - PingFang SC
  - Microsoft YaHei
  - SimHei
  - WenQuanYi Micro Hei
  - Droid Sans Fallback
  - Arial Unicode MS
  font_name: PingFang SC
  font_path: null
  font_size: 48
  min_font_size: 48         # 最小字体大小
  max_font_size: 48         # 最大字体大小
  font_size_scale_factor: 0.02  # 相对于视频宽度的缩放因子
  margin_bottom: 100
  max_chars_per_line: 25
  min_confidence_threshold: 0.3
  position: bottom
  stroke_color: white
  stroke_width: 2
  stt_min_segment_length: 0.5
  stt_segment_merge_threshold: 1.5
  trim_punctuation: false
templates:
  default: simple
  simple:
    image_duration: 5.0
    transition: fade
    transition_duration: 0.5
    type: image_slideshow
  tutorial:
    type: screen_recording
    watermark: true
    watermark_position: bottom-right
tts:
  available_voices:
  - zh-CN-XiaoxiaoNeural
  - zh-CN-YunxiNeural
  - zh-CN-YunyangNeural
  - zh-CN-XiaoyiNeural
  engine: edge-tts
  pitch: 0
  rate: 1.0
  voice: zh-CN-XiaoxiaoNeural
  volume: 1.0
video:
  background_color:
  - 0
  - 0
  - 0
  bitrate: 5000k
  codec: libx264                   # 使用软件编码器（CPU处理）
  duration: auto
  fps: 30
  resolution:
  - 1920
  - 1080
